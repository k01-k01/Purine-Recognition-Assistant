
# å˜Œå‘¤è¯†åˆ«åŠ©æ‰‹

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäº YOLO + ResNet50 èåˆæ¨¡å‹çš„é£Ÿç‰©è¯†åˆ«ä¸å°¿é…¸åˆ†æç³»ç»Ÿï¼Œåç«¯é‡‡ç”¨ FastAPI æ¡†æ¶ï¼Œå‰ç«¯åŸºäº Next.jsã€‚æ”¯æŒæ‹ç…§æˆ–ä¸Šä¼ å›¾ç‰‡è‡ªåŠ¨è¯†åˆ«é£Ÿç‰©ç±»åˆ«ï¼Œåˆ†æå˜Œå‘¤å«é‡å¹¶ç»™å‡ºç—›é£é¥®é£Ÿå»ºè®®ã€‚

## ä¸»è¦åŠŸèƒ½

- ğŸ½ï¸ **é£Ÿç‰©è¯†åˆ«**ï¼šæ‹ç…§æˆ–ä¸Šä¼ å›¾ç‰‡ï¼Œè‡ªåŠ¨æ£€æµ‹é£Ÿç‰©åŒºåŸŸå¹¶åˆ†ç±»
- ğŸ§¬ **å°¿é…¸åˆ†æ**ï¼šç»“åˆé£Ÿç‰©æ•°æ®åº“ï¼Œè¾“å‡ºå˜Œå‘¤å«é‡åŠç—›é£å»ºè®®
- ğŸ“Š **è¥å…»ä¼°ç®—**ï¼šå±•ç¤ºçƒ­é‡ã€è›‹ç™½è´¨ã€è„‚è‚ªç­‰è¥å…»ä¿¡æ¯
- ğŸ¯ **é¥®é£Ÿå»ºè®®**ï¼šé’ˆå¯¹ç—›é£æ‚£è€…çš„ä¸ªæ€§åŒ–æ¨è
- ï¿½ **é«˜æ€§èƒ½æ¨ç†**ï¼šèåˆ YOLOv8 æ£€æµ‹ä¸ ResNet50 åˆ†ç±»ï¼Œæ”¯æŒ GPU åŠ é€Ÿ

## æŠ€æœ¯æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å‰ç«¯åº”ç”¨     â”‚â—„â”€â”€â–ºâ”‚ FastAPIåç«¯ â”‚â—„â”€â”€â–ºâ”‚  AIæ¨¡å‹å±‚   â”‚
â”‚ Next.js/TS  â”‚    â”‚ APIæœåŠ¡     â”‚    â”‚ YOLO+ResNet â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ•°æ®é›†ä¸æ¨¡å‹è®­ç»ƒ

- ä½¿ç”¨ Food20_new æ•°æ®é›†ï¼ˆ20ç±»é£Ÿç‰©ï¼Œçº¦400å¼ /ç±»ï¼‰
- è‡ªåŠ¨è½¬æ¢ä¸º YOLO æ ¼å¼ï¼Œæ”¯æŒç›®æ ‡æ£€æµ‹ä¸åˆ†ç±»
- è®­ç»ƒè„šæœ¬ï¼š`backend/scripts/train_food20_models.py`
- æ”¯æŒè‡ªå®šä¹‰è®­ç»ƒå‚æ•°ä¸æ•°æ®å¢å¼º
- è¾“å‡ºæ¨¡å‹ï¼š
  - `models/resnet_food20_classifier.pth`ï¼ˆResNetåˆ†ç±»å™¨ï¼‰
  - `models/yolo_food20_detector.pt`ï¼ˆYOLOæ£€æµ‹å™¨ï¼‰

### æ•°æ®é›†ç»“æ„
```
datasets/Food20_new/
â”œâ”€â”€ train/
â”‚   â”œâ”€â”€ images/
â”‚   â””â”€â”€ train.json
â”œâ”€â”€ val/
â”‚   â”œâ”€â”€ images/
â”‚   â””â”€â”€ val.json
â””â”€â”€ test/
    â”œâ”€â”€ images/
    â””â”€â”€ test.json
```

### è®­ç»ƒå‘½ä»¤ç¤ºä¾‹
```bash
# å®‰è£…ä¾èµ–
pip install -r backend/requirements.txt

# è®­ç»ƒResNetåˆ†ç±»å™¨
python backend/scripts/train_food20_models.py --model resnet

# è®­ç»ƒYOLOæ£€æµ‹å™¨
python backend/scripts/train_food20_models.py --model yolo

# è¯„ä¼°æ¨¡å‹
python backend/scripts/train_food20_models.py --evaluate
```

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js 16+
- Python 3.8+
- æ¨èGPU

### å®‰è£…ä¾èµ–
```bash
# å‰ç«¯ä¾èµ–
npm install
# åç«¯ä¾èµ–
cd backend
pip install -r requirements.txt
```

### ç¯å¢ƒå˜é‡é…ç½®
å‰ç«¯ï¼šå¤åˆ¶ `env.example` ä¸º `.env.local`ï¼Œé…ç½®åç«¯APIåœ°å€ã€‚
åç«¯ï¼šå¤åˆ¶ `env.example` ä¸º `.env`ï¼Œé…ç½®ç«¯å£ç­‰å‚æ•°ã€‚

### å¯åŠ¨æœåŠ¡
```bash
# å¯åŠ¨åç«¯
cd backend
python main.py
# å¯åŠ¨å‰ç«¯
npm run dev
```
å‰ç«¯ï¼šhttp://localhost:3000
åç«¯ï¼šhttp://localhost:3003


## é¡¹ç›®ç»“æ„

```
project/
â”œâ”€â”€ app/                    # Next.jså‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ page.tsx           # ä¸»é¡µé¢
â”‚   â”œâ”€â”€ layout.tsx         # å¸ƒå±€ç»„ä»¶
â”‚   â””â”€â”€ test-camera/       # ç›¸æœºæµ‹è¯•é¡µé¢
â”œâ”€â”€ components/            # Reactç»„ä»¶
â”‚   â”œâ”€â”€ ui/               # åŸºç¡€UIç»„ä»¶
â”‚   â”œâ”€â”€ CameraCapture.tsx # ç›¸æœºæ‹ç…§ç»„ä»¶
â”‚   â”œâ”€â”€ RecognitionPage.tsx # è¯†åˆ«é¡µé¢
â”‚   â””â”€â”€ ...
â”œâ”€â”€ lib/                  # å·¥å…·åº“
â”‚   â””â”€â”€ recognition-api.ts # è¯†åˆ«APIæœåŠ¡
â”œâ”€â”€ backend/              # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ main.py           # FastAPIä¸»åº”ç”¨
â”‚   â”œâ”€â”€ models/           # AIæ¨¡å‹
â”‚   â”œâ”€â”€ services/         # ä¸šåŠ¡æœåŠ¡
â”‚   â”œâ”€â”€ utils/            # å·¥å…·ç±»
|   â”œâ”€â”€ datasets/         # è®­ç»ƒæ¨¡å‹æ•°æ®é›†
|   â”œâ”€â”€ scripts/          # è®­ç»ƒYOLO+ResNet50 
â”‚   â””â”€â”€ requirements.txt  # Pythonä¾èµ–
â”œâ”€â”€ package.json          # å‰ç«¯ä¾èµ–
â””â”€â”€ README.md            # é¡¹ç›®è¯´æ˜
```

## APIç«¯ç‚¹

### åç«¯API (http://localhost:3003)

- `GET /health` - å¥åº·æ£€æŸ¥
- `GET /api/info` - æœåŠ¡å™¨ä¿¡æ¯
- `GET /api/model-status` - æ¨¡å‹çŠ¶æ€
- `POST /api/recognize` - é£Ÿç‰©è¯†åˆ«
- `POST /api/upload` - å›¾ç‰‡ä¸Šä¼ 
- `GET /api/foods` - é£Ÿç‰©æ•°æ®åº“
- `GET /api/foods/{food_name}` - ç‰¹å®šé£Ÿç‰©ä¿¡æ¯

### å‰ç«¯é¡µé¢ (http://localhost:3000)

- `/` - ä¸»åº”ç”¨é¡µé¢
- `/test-camera` - ç›¸æœºåŠŸèƒ½æµ‹è¯•é¡µé¢


## ä½¿ç”¨è¯´æ˜

### æ‹ç…§è¯†åˆ«
1. ç‚¹å‡»â€œæ‹ç…§è¯†åˆ«â€æŒ‰é’®
2. å…è®¸æµè§ˆå™¨è®¿é—®ç›¸æœº
3. å°†é£Ÿç‰©æ”¾åœ¨å–æ™¯æ¡†å†…
4. æ‹ç…§å¹¶ç¡®è®¤
5. è‡ªåŠ¨è¯†åˆ«å¹¶æ˜¾ç¤ºç»“æœ

### å›¾ç‰‡ä¸Šä¼ 
1. ç‚¹å‡»â€œä»ç›¸å†Œé€‰æ‹©â€æŒ‰é’®
2. é€‰æ‹©é£Ÿç‰©å›¾ç‰‡
3. ç‚¹å‡»â€œå¼€å§‹è¯†åˆ«â€
4. æ˜¾ç¤ºè¯†åˆ«ç»“æœä¸åˆ†æ


## æŠ€æœ¯æ ˆ

### å‰ç«¯
- Next.js 13 + React 18
- Radix UI + Tailwind CSS
- Zustand çŠ¶æ€ç®¡ç†
- TypeScript ç±»å‹å®‰å…¨
- react-webcam ç›¸æœºåŠŸèƒ½

### åç«¯
- FastAPI æ¡†æ¶
- Python 3.8+
- YOLOv8 æ£€æµ‹å™¨ + ResNet50 åˆ†ç±»å™¨
- OpenCV, Pillow å›¾åƒå¤„ç†
- PyTorch, Ultralytics æœºå™¨å­¦ä¹ 

### è®­ç»ƒä¸æ¨ç†
- æ”¯æŒ GPU åŠ é€Ÿ
- è‡ªåŠ¨æ•°æ®å¢å¼ºä¸æ¨¡å‹ä¿å­˜
- APIæ¥å£ç»Ÿä¸€ï¼Œæ˜“äºæ‰©å±•


## å¼€å‘æŒ‡å—

### å‰ç«¯å¼€å‘
```bash
npm run dev          # å¼€å‘æ¨¡å¼
npm run build        # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run start        # å¯åŠ¨ç”Ÿäº§æœåŠ¡å™¨
```

### åç«¯å¼€å‘
```bash
cd backend
python start_server.py    # å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰
uvicorn main:app --reload # ç›´æ¥ä½¿ç”¨uvicorn
```

### æµ‹è¯•
```bash
# é›†æˆæµ‹è¯•
node test-integration.js
# åç«¯APIæµ‹è¯•
cd backend
python test_api.py
```


## éƒ¨ç½²

### å‰ç«¯éƒ¨ç½²
```bash
npm run build
npm run start
```

### åç«¯éƒ¨ç½²
```bash
cd backend
python start_server.py
```

### Docker éƒ¨ç½²
```bash
# å‰ç«¯
docker build -t purine-frontend .
docker run -p 3000:3000 purine-frontend
# åç«¯
cd backend
docker build -t purine-backend .
docker run -p 3003:3003 purine-backend
```


## ç¯å¢ƒå˜é‡

### å‰ç«¯ (.env.local)
```env
# åç«¯APIé…ç½®
NEXT_PUBLIC_BACKEND_URL=http://localhost:3003
```

### åç«¯ (.env)
```env
# æœåŠ¡å™¨é…ç½®
PORT=3003
HOST=0.0.0.0
# ç¯å¢ƒé…ç½®
NODE_ENV=development
```


## æ•…éšœæ’é™¤

### ç›¸æœºæ— æ³•ä½¿ç”¨
- æ£€æŸ¥è®¾å¤‡æ‘„åƒå¤´å’Œæµè§ˆå™¨æƒé™
- å»ºè®®ç”Ÿäº§ç¯å¢ƒä½¿ç”¨ HTTPS

### åç«¯æœåŠ¡æ— æ³•è¿æ¥
- æ£€æŸ¥åç«¯æœåŠ¡æ˜¯å¦å¯åŠ¨
- ç¡®è®¤ç«¯å£æœªè¢«å ç”¨
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

### è¯†åˆ«å¤±è´¥
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- æ£€æŸ¥APIå¯†é’¥å’Œæ¨¡å‹æ–‡ä»¶
- æŸ¥çœ‹åç«¯/å‰ç«¯æ—¥å¿—




